<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Write Like Me</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">
    <script src="https://js.puter.com/v2/"></script>
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
</head>
<body>
    <h1>Write Like Me</h1>
    <p class="subtitle">Create a writing profile from your samples and generate AI text in your unique style</p>
    <div class="how-to-use-row">
        <button id="btn-info" class="btn-how-to-use">How to use</button>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3>About Write Like Me</h3>
                <button id="btn-close-info" class="btn-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Write Like Me</strong> is a free, serverless tool that analyzes your writing samples and creates a detailed writing profile. Use that profile to generate new text in your unique style, free of common AI writing patterns.</p>

                <h4>How it works</h4>
                <p>Share your writing samples via URL, copy-paste, or file upload. The tool analyzes your style, tone, word choice, sentence structure, and other characteristics to build a comprehensive writing profile. Use the profile to generate new content that matches your voice.</p>

                <h4>Advanced slop detection</h4>
                <p>The heart of Write Like Me is its comprehensive AI pattern detection system based on extensive research into what makes AI writing sound artificial. The tool detects and removes:</p>
                <p><strong>Critical patterns</strong> — Em dashes, antithetical constructions, sycophantic phrases, bullet lists, third-person self-references. These are always fixed automatically.</p>
                <p><strong>High priority</strong> — Lazy declarative openers ("Here's the thing:"), colon-based declarations, formulaic transitions (However, Moreover), meta-commentary.</p>
                <p><strong>Medium priority</strong> — Overly formal phrasing, AI vocabulary clusters (landscape, ecosystem, journey), passive voice, engagement bait.</p>
                <p><strong>Low priority</strong> — Excessive intensifiers, hedge word clusters, filler adjectives.</p>
                <p><strong>Formatting issues</strong> — Wall of text without breaks, very long paragraphs, excessive whitespace, extra long sentences.</p>
                <p>Generated text receives a quality score from 0-100 showing how authentic it sounds. Text with critical or formatting issues is automatically fixed or rewritten.</p>

                <h4>Platform-aware generation</h4>
                <p>Mention a social platform in your prompt and the tool automatically adapts brevity and style:</p>
                <p><strong>X/Twitter</strong> — Ultra-brief, 1-2 sentences, punchy.</p>
                <p><strong>LinkedIn</strong> — Professional but concise, 100-200 words max.</p>
                <p><strong>Instagram/TikTok</strong> — Brief captions, hook-focused.</p>
                <p><strong>Threads/Bluesky</strong> — Brief takes, 2-4 sentences.</p>
                <p><strong>Email/Substack</strong> — Professional structure with appropriate length.</p>
                <p>For professional platforms, you can choose to adjust formality while maintaining your voice.</p>

                <h4>One-click sharing</h4>
                <p>After generating content for social media, share directly to X, LinkedIn, Facebook, or Reddit. If your prompt mentioned a URL, it's automatically appended for clean link sharing.</p>

                <h4>Input methods</h4>
                <p><strong>URL</strong> — Enter URLs to blog posts, articles, or web pages. The tool fetches and extracts the text content automatically.</p>
                <p><strong>Paste</strong> — Copy and paste writing samples directly into the text area. Add multiple samples separated by line breaks.</p>
                <p><strong>Upload</strong> — Upload text files (.txt, .md) containing your writing samples. Supports batch uploads of multiple files.</p>
                <p><strong>Load Profile</strong> — Paste or upload a previously saved profile JSON to skip analysis.</p>

                <h4>Content types</h4>
                <p>Select a content category, then choose Personal or Professional tone where applicable:</p>
                <p><strong>Social Media</strong> — Personal (X, Instagram) or Professional (LinkedIn). Adapted for platform style and brevity.</p>
                <p><strong>Blog</strong> — Personal (conversational, story-driven) or Professional (informative, authoritative).</p>
                <p><strong>Long-form</strong> — Articles, essays, reports with sustained arguments.</p>
                <p><strong>Creative</strong> — Fiction, narrative, experimental styles.</p>
                <p><strong>README / Documentation</strong> — Technical docs, clear and structured.</p>
                <p><strong>Marketing Copy</strong> — Persuasive, benefit-focused, compelling.</p>
                <p><strong>Email</strong> — Personal or Professional correspondence with proper formatting.</p>
                <p><strong>Chat / Text</strong> — Ultra-brief, casual messaging style.</p>
                <p><strong>Bio</strong> — Personal or Professional about sections.</p>
                <p><strong>Cover Letter</strong> — Professional applications with proper greeting and sign-off.</p>

                <h4>URL fetching</h4>
                <p>When you include URLs in your prompt, they appear as artifacts below the input. Click any URL to preview its fetched content, edit it if needed, or fetch it if not yet loaded. The content is used as context when generating.</p>

                <h4>GitHub repo detection</h4>
                <p>GitHub repository URLs are detected automatically. The tool fetches the README and repository metadata (description, language, stars) to provide technical context when generating content about code projects.</p>

                <h4>Style sketch</h4>
                <p>Based on your prompt, the tool detects relevant tones and emotional contexts. For example, "breakup" triggers a Somber tone, while "less technical audience" suggests Accessible style. Click tags to toggle them on/off. Hover for descriptions of each style.</p>
                <p>Click <strong>Open Style Studio</strong> for the full style builder with all available styles organized by category. Add custom feedback like "Make it more confident" to further guide generation. After generating, click <strong>Edit Style</strong> to adjust tones and regenerate.</p>

                <h4>API providers</h4>
                <p><strong>Puter GPT-OSS</strong> is the default and is completely free with no API key required. Uses Puter's user-pays model.</p>
                <p><strong>OpenRouter</strong> provides access to many models through a single API key. CORS-friendly.</p>
                <p><strong>Anthropic</strong> connects directly to the Claude Messages API.</p>
                <p><strong>OpenAI</strong> connects to the Chat Completions API.</p>
                <p><strong>Google Gemini</strong> connects to the Gemini API.</p>
                <p><strong>Ollama</strong> runs AI models locally on your machine. No API key needed.</p>
                <p><strong>Custom Endpoint</strong> supports any OpenAI-compatible API.</p>

                <h4>Profile management</h4>
                <p>Your profile saves to browser localStorage and auto-loads next time. Download as JSON to reuse across sessions or share with others. Use "Quick View" or "Full Profile" while generating to review, or "Clear Profile" to start fresh.</p>

                <p>All processing happens through the selected API provider. No data is stored on any server.</p>
            </div>
        </div>
    </div>

    <div id="file-protocol-warning" class="warning-banner hidden">
        <strong>Local file detected.</strong> The Puter API requires a web server.
        Run this from your project folder:
        <code>python3 -m http.server 8000</code> then open <a href="http://localhost:8000">http://localhost:8000</a>
    </div>

    <div class="container">
        <!-- Settings Panel -->
        <button id="settings-toggle" class="settings-toggle">&#9654; API Settings</button>
        <div id="settings-panel" class="settings-panel hidden">
            <div class="form-group">
                <label for="api-mode">API Provider</label>
                <select id="api-mode">
                    <option value="puter">Puter GPT-OSS (Free, no key required)</option>
                    <option value="openrouter">OpenRouter (CORS-friendly, many models)</option>
                    <option value="anthropic">Anthropic Claude</option>
                    <option value="openai">OpenAI</option>
                    <option value="google">Google Gemini</option>
                    <option value="ollama">Ollama (Local)</option>
                    <option value="custom">Custom Endpoint</option>
                </select>
            </div>

            <!-- Puter Settings -->
            <div id="puter-settings" class="provider-settings">
                <div class="form-group">
                    <label for="puter-model">Model</label>
                    <select id="puter-model">
                        <option value="openai/gpt-oss-120b">gpt-oss-120b (117B params, best quality)</option>
                        <option value="openai/gpt-oss-120b:exacto">gpt-oss-120b:exacto (precise variant)</option>
                        <option value="openai/gpt-oss-20b">gpt-oss-20b (21B params, faster)</option>
                    </select>
                </div>
                <p class="settings-hint">Powered by Puter.com — free, no API key needed.</p>
            </div>

            <!-- Ollama Settings -->
            <div id="ollama-settings" class="provider-settings hidden">
                <div class="form-group">
                    <label for="ollama-url">Ollama URL</label>
                    <input type="text" id="ollama-url" value="http://localhost:11434" placeholder="http://localhost:11434">
                </div>
                <div class="form-group">
                    <label for="ollama-model">Model</label>
                    <input type="text" id="ollama-model" placeholder="gpt-oss:20b" value="gpt-oss:20b">
                </div>
                <div class="ollama-hint-row">
                    <p class="settings-hint">Runs locally on your machine — no API key, no data leaves your computer.</p>
                    <button type="button" id="btn-ollama-help" class="btn-small">Setup Instructions</button>
                </div>
            </div>

            <!-- Ollama Instructions Modal -->
            <div id="ollama-modal" class="modal-overlay hidden">
                <div class="modal">
                    <div class="modal-header">
                        <h3>Running Write Like Me with Ollama</h3>
                        <button id="btn-close-ollama" class="btn-modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Ollama lets you run AI models locally on your own machine. No API key needed, no data leaves your computer, and it's completely free.</p>

                        <p class="alert-box"><strong>Browser requirement:</strong> When using Ollama from GitHub Pages (or any HTTPS URL), <strong>Google Chrome is required</strong>. Safari and other WebKit browsers block HTTPS pages from connecting to local HTTP servers.</p>

                        <div class="os-tabs">
                            <button class="os-tab-btn active" data-os="mac">macOS</button>
                            <button class="os-tab-btn" data-os="win">Windows</button>
                            <button class="os-tab-btn" data-os="linux">Linux</button>
                        </div>

                        <!-- macOS -->
                        <div class="os-panel active" data-os="mac">
                            <h4>1. Install Ollama</h4>
                            <pre class="terminal-block">curl -fsSL https://ollama.com/install.sh | sh</pre>

                            <h4>2. Pull the default model</h4>
                            <pre class="terminal-block">ollama pull gpt-oss:20b</pre>

                            <h4>3. Start Ollama with remote access enabled</h4>
                            <pre class="terminal-block">pkill ollama
OLLAMA_ORIGINS=* ollama serve</pre>
                            <p>To make this permanent, add to your <code>~/.zshrc</code>:</p>
                            <pre class="terminal-block">export OLLAMA_ORIGINS=*</pre>
                        </div>

                        <!-- Windows -->
                        <div class="os-panel" data-os="win">
                            <h4>1. Install Ollama</h4>
                            <p>Download the installer from <strong>ollama.com/download</strong> and run it.</p>

                            <h4>2. Pull the default model</h4>
                            <pre class="terminal-block">ollama pull gpt-oss:20b</pre>

                            <h4>3. Start Ollama with remote access enabled</h4>
                            <pre class="terminal-block">Stop-Process -Name ollama -Force
$env:OLLAMA_ORIGINS="*"; ollama serve</pre>
                            <p>To make permanent:</p>
                            <pre class="terminal-block">[System.Environment]::SetEnvironmentVariable("OLLAMA_ORIGINS", "*", "User")</pre>
                        </div>

                        <!-- Linux -->
                        <div class="os-panel" data-os="linux">
                            <h4>1. Install Ollama</h4>
                            <pre class="terminal-block">curl -fsSL https://ollama.com/install.sh | sh</pre>

                            <h4>2. Pull the default model</h4>
                            <pre class="terminal-block">ollama pull gpt-oss:20b</pre>

                            <h4>3. Configure and restart</h4>
                            <pre class="terminal-block">sudo systemctl edit ollama</pre>
                            <p>Add under <code>[Service]</code>:</p>
                            <pre class="terminal-block">[Service]
Environment="OLLAMA_ORIGINS=*"</pre>
                            <pre class="terminal-block">sudo systemctl restart ollama</pre>
                        </div>

                        <h4>4. Configure Write Like Me</h4>
                        <ol>
                            <li>Select <strong>Ollama (Local)</strong> as the API Provider</li>
                            <li>URL defaults to <code>http://localhost:11434</code></li>
                            <li>Model defaults to <strong>gpt-oss:20b</strong></li>
                            <li>Analyze or generate — connection is verified before sending</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Shared fields for key-based providers -->
            <div id="keyed-settings" class="provider-settings hidden">
                <div class="form-group">
                    <label for="api-key">API Key</label>
                    <input type="password" id="api-key" placeholder="sk-...">
                </div>
                <div id="base-url-group" class="form-group hidden">
                    <label for="base-url">Base URL</label>
                    <input type="text" id="base-url" placeholder="https://api.openai.com/v1">
                </div>
                <div class="form-group">
                    <label for="model-name">Model</label>
                    <input type="text" id="model-name" placeholder="gpt-4o">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="save-key">
                    <label for="save-key">Remember settings in this browser</label>
                </div>
                <p id="provider-hint" class="settings-hint"></p>
            </div>
        </div>

        <hr class="section-divider">

        <!-- Step 1: Input Writing Samples -->
        <div id="step-input" class="step active">
            <!-- Saved Profile Banner (shown when profile exists in localStorage) -->
            <div id="saved-profile-banner" class="saved-profile-banner hidden">
                <span class="banner-text">You have a saved writing profile</span>
                <div class="banner-actions">
                    <button id="btn-use-saved-profile" class="btn-small">Use Saved Profile</button>
                    <button id="btn-add-to-profile" class="btn-text">Add More Samples</button>
                    <button id="btn-clear-profile" class="btn-text danger">Clear</button>
                </div>
            </div>

            <h3>Step 1: Share Your Writing Samples</h3>
            <p class="step-description">Provide samples of your writing to analyze. More samples lead to more accurate style detection.</p>
            <div class="quality-tip">
                <strong>Tip:</strong> Add 3-5 diverse samples totaling 2,000+ words for an <span class="quality-excellent">Excellent</span> profile. 
                Even 1-2 samples will work, but more variety means better results.
            </div>

            <div class="input-tabs">
                <button class="input-tab-btn active" data-tab="paste">Paste Text</button>
                <button class="input-tab-btn" data-tab="url">From URL</button>
                <button class="input-tab-btn" data-tab="upload">Upload Files</button>
                <button class="input-tab-btn" data-tab="load">Load Profile</button>
            </div>

            <!-- Paste Tab -->
            <div class="input-panel active" data-tab="paste">
                <div class="form-group">
                    <label for="paste-input">Paste Your Writing</label>
                    <textarea id="paste-input" placeholder="Paste your writing samples here. You can include multiple samples — just separate them with blank lines. The more samples you provide, the more accurate your writing profile will be." rows="10"></textarea>
                    <div class="char-counter"><span id="paste-char-count">0</span> characters</div>
                </div>
                <button id="btn-add-paste" class="btn-secondary">Add Sample</button>
            </div>

            <!-- URL Tab -->
            <div class="input-panel" data-tab="url">
                <div class="form-group">
                    <label for="url-input">Enter URLs (one per line)</label>
                    <textarea id="url-input" placeholder="Paste one or more URLs, one per line:
https://example.com/your-blog-post
https://example.com/another-post" rows="6"></textarea>
                </div>
                <button id="btn-fetch-url" class="btn-secondary">Fetch Content</button>
                <div id="url-fetch-progress" class="url-fetch-progress hidden">
                    <div class="progress-bar"><div class="progress-fill" id="url-progress-fill"></div></div>
                    <div id="url-progress-text" class="progress-text">0 / 0</div>
                </div>
                <div id="url-status" class="url-status hidden"></div>
            </div>

            <!-- Upload Tab -->
            <div class="input-panel" data-tab="upload">
                <div id="drop-area" class="drop-area">
                    <p>Drag & drop text files here or click to select</p>
                    <p class="drop-hint">Supports .txt, .md files — upload multiple at once</p>
                    <input type="file" id="file-input" accept=".txt,.md,.text" multiple class="hidden">
                </div>
            </div>

            <!-- Load Profile Tab -->
            <div class="input-panel" data-tab="load">
                <div class="form-group">
                    <label for="profile-input">Paste Writing Profile JSON</label>
                    <textarea id="profile-input" placeholder="Paste a previously saved writing profile JSON here to skip analysis and go directly to text generation." rows="6"></textarea>
                </div>
                <div class="load-profile-actions">
                    <button id="btn-load-profile" class="btn-secondary">Load Profile</button>
                    <span class="load-divider">or</span>
                    <label for="profile-file-input" class="btn-secondary btn-upload-profile">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"/></svg>
                        Upload JSON File
                    </label>
                    <input type="file" id="profile-file-input" accept=".json" class="hidden">
                </div>
            </div>

            <!-- Sample List -->
            <div id="samples-section" class="samples-section hidden">
                <h4>Your Samples <span id="sample-count">(0)</span></h4>
                <div id="samples-list" class="samples-list"></div>
                <div class="sample-stats">
                    <span id="total-words">0 words</span>
                    <span id="total-chars">0 characters</span>
                </div>
            </div>

            <button id="btn-analyze" class="btn-primary" disabled>Analyze Writing Style</button>
        </div>

        <!-- Step 2: Writing Profile -->
        <div id="step-profile" class="step">
            <h3>Step 2: Your Writing Profile</h3>

            <div id="profile-loading" class="loading-container hidden">
                <div class="spinner"></div>
                <div class="loading-text">Analyzing your writing style...</div>
                <div class="loading-status">Examining tone, vocabulary, sentence structure, and stylistic patterns</div>
            </div>

            <div id="profile-content" class="profile-content hidden">
                <!-- Profile Quality Metric -->
                <div id="profile-quality" class="profile-quality">
                    <div class="quality-header">
                        <span class="quality-label">Profile Quality</span>
                        <span id="quality-score" class="quality-score">—</span>
                    </div>
                    <div class="quality-bar">
                        <div id="quality-fill" class="quality-fill"></div>
                    </div>
                    <p id="quality-suggestion" class="quality-suggestion"></p>
                </div>

                <div class="profile-header">
                    <div class="profile-score">
                        <span class="profile-label">Writing Complexity</span>
                        <span id="complexity-score" class="complexity-score">—</span>
                    </div>
                    <div class="profile-meta">
                        <span id="reading-level" class="reading-level">—</span>
                        <span id="sample-summary" class="sample-summary">—</span>
                    </div>
                </div>

                <div class="profile-grid">
                    <div class="profile-card">
                        <h4>Style</h4>
                        <div id="style-analysis"></div>
                    </div>
                    <div class="profile-card">
                        <h4>Tone & Voice</h4>
                        <div id="tone-analysis"></div>
                    </div>
                    <div class="profile-card">
                        <h4>Vocabulary</h4>
                        <div id="vocab-analysis"></div>
                    </div>
                    <div class="profile-card">
                        <h4>Structure</h4>
                        <div id="structure-analysis"></div>
                    </div>
                </div>

                <div class="profile-section">
                    <h4>Stylistic Markers</h4>
                    <div id="markers-analysis"></div>
                </div>

                <div class="profile-section">
                    <h4>Patterns to Replicate</h4>
                    <div id="patterns-analysis"></div>
                </div>

                <div class="profile-actions">
                    <button id="btn-download-profile" class="btn-small">Download Profile JSON</button>
                    <button id="btn-copy-profile" class="btn-small">Copy Profile</button>
                    <button id="btn-save-storage" class="btn-small btn-primary-small" title="Save your profile to this browser so it loads automatically next time">
                        Save to Browser
                    </button>
                </div>
            </div>

            <div class="step-nav">
                <button id="btn-back-input" class="btn-secondary">Back</button>
                <button id="btn-to-generate" class="btn-primary" disabled>Generate Content</button>
            </div>
        </div>

        <!-- Step 3: Generate Content -->
        <div id="step-generate" class="step">
            <h3>Step 3: Generate Content in Your Style</h3>
            
            <div class="profile-preview-bar">
                <span>Writing as: <strong id="profile-name-preview">Your Style</strong></span>
                <div class="profile-preview-actions">
                    <button id="btn-quick-profile" class="btn-small btn-ghost">Quick View</button>
                    <button id="btn-full-profile" class="btn-small btn-ghost">Full Profile</button>
                    <button id="btn-clear-profile-generate" class="btn-small btn-ghost btn-danger-ghost">Clear Profile</button>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="content-category">Content Type</label>
                    <select id="content-category">
                        <option value="social">Social Media</option>
                        <option value="blog">Blog Post</option>
                        <option value="email">Email</option>
                        <option value="long-form">Long-form Article</option>
                        <option value="creative">Creative Writing</option>
                        <option value="poetry">Poetry</option>
                        <option value="readme">README / Docs</option>
                        <option value="marketing">Marketing Copy</option>
                        <option value="chat">Text / Chat</option>
                        <option value="bio">Bio / About Me</option>
                        <option value="cover-letter">Cover Letter</option>
                    </select>
                </div>
                <div id="tone-selector" class="form-group hidden">
                    <label for="content-tone">Tone</label>
                    <select id="content-tone">
                        <option value="personal">Personal</option>
                        <option value="professional">Professional</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="prompt-input">What should I write about?</label>
                <textarea id="prompt-input" placeholder="Example: Write a social media post about my new blog article: https://example.com/article

Or: Write a paragraph introducing my thoughts on remote work culture

Be specific about what you want — the tool will handle styling it in your voice." rows="4"></textarea>
            </div>

            <!-- URL Artifacts Section -->
            <div id="url-artifacts" class="url-artifacts hidden">
                <h5>URLs to Fetch</h5>
                <div id="url-artifacts-list" class="url-artifacts-list"></div>
            </div>

            <!-- GitHub Repo Artifacts Section -->
            <div id="github-artifacts" class="github-artifacts hidden">
                <h5>
                    <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor" style="vertical-align: -2px; margin-right: 4px;"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    GitHub Repository
                </h5>
                <div id="github-artifacts-list" class="github-artifacts-list"></div>
            </div>

            <!-- Style Sketch Section -->
            <div id="style-builder" class="style-builder hidden">
                <h5>Style Sketch</h5>
                <div id="style-suggestions" class="style-suggestions"></div>
            </div>

            <!-- Platform Detection Section -->
            <div id="platform-artifacts" class="platform-artifacts hidden">
                <h5>Detected Platform</h5>
                <div id="platform-info" class="platform-info"></div>
            </div>

            <button id="btn-generate" class="btn-primary">Generate Text</button>

            <div id="generate-loading" class="loading-container hidden">
                <div class="spinner"></div>
                <div class="loading-text">Generating content in your style...</div>
                <div class="loading-status">Applying your writing profile and removing AI patterns</div>
            </div>

            <!-- Output Section -->
            <div id="output-section" class="output-section hidden">
                <div id="output-header" class="output-header">
                    <h4>Generated Content</h4>
                    <button id="btn-toggle-output" class="btn-toggle-output hidden" title="Toggle output">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </button>
                </div>
                <div id="output-body" class="output-body">
                    <div id="generated-content" class="generated-content" contenteditable="true" spellcheck="true"></div>
                    <p class="edit-hint">Click above to edit the generated text directly</p>
                    <div class="btn-row">
                        <button id="btn-copy-output" class="btn-small">Copy</button>
                        <button id="btn-regenerate" class="btn-small">Regenerate</button>
                        <button id="btn-edit-style" class="btn-small btn-edit-style">Edit Style</button>
                    </div>

                <div id="share-buttons" class="share-buttons hidden">
                    <div class="share-primary">
                        <button id="btn-share-x" class="btn-share btn-share-x hidden" title="Share on X">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                        </button>
                        <button id="btn-share-linkedin" class="btn-share btn-share-linkedin hidden" title="Share on LinkedIn">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                        </button>
                        <button id="btn-share-facebook" class="btn-share btn-share-facebook hidden" title="Share on Facebook">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </button>
                        <button id="btn-share-reddit" class="btn-share btn-share-reddit hidden" title="Share on Reddit">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
                        </button>
                        <button id="btn-share-instagram" class="btn-share btn-share-instagram hidden" title="Copy for Instagram">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.757-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
                        </button>
                        <button id="btn-share-threads" class="btn-share btn-share-threads hidden" title="Copy for Threads">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.103-3.96-3.91-5.963-8.349-5.958-2.868.004-5.078.966-6.565 2.86-1.27 1.618-1.97 3.913-1.999 6.967.03 3.057.73 5.35 1.999 6.966 1.484 1.894 3.687 2.857 6.55 2.861 2.478-.032 4.378-.678 5.648-1.921 1.373-1.343 1.463-2.96 1.322-3.94-.198-1.395-.795-2.478-1.736-3.152-.943-.678-2.053-.986-3.243-.986h-.618l-.114-.002c-1.294.014-2.378.343-3.14.95-.659.528-1.007 1.236-1.007 2.048 0 .72.315 1.37.885 1.828.592.476 1.417.738 2.322.738.84 0 1.58-.184 2.204-.548.518-.302.943-.741 1.262-1.31l1.763 1.04c-.5.877-1.185 1.57-2.04 2.058-.966.551-2.08.833-3.312.838h-.026c-1.354-.007-2.54-.358-3.44-.953-1.044-.69-1.67-1.727-1.813-3h-.002c-.136-1.235.18-2.315 1.044-3.243.92-.992 2.267-1.594 3.886-1.752l.162-.015.144-.004c1.55-.015 2.92.265 4.076.821 1.202.58 2.152 1.417 2.823 2.492.645 1.035 1.026 2.275 1.126 3.678.177 2.466-.53 4.636-2.058 6.18-1.708 1.721-4.2 2.612-7.416 2.648z"/></svg>
                        </button>
                    </div>
                    <button id="btn-show-all-share" class="btn-text btn-show-more">More platforms</button>
                    <div id="share-all-platforms" class="share-all-platforms hidden">
                        <button id="btn-share-x-all" class="btn-share btn-share-x" title="Share on X">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                        </button>
                        <button id="btn-share-linkedin-all" class="btn-share btn-share-linkedin" title="Share on LinkedIn">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                        </button>
                        <button id="btn-share-facebook-all" class="btn-share btn-share-facebook" title="Share on Facebook">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </button>
                        <button id="btn-share-reddit-all" class="btn-share btn-share-reddit" title="Share on Reddit">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
                        </button>
                    </div>
                </div>

                <div id="whodoneit-link" class="whodoneit-link hidden">
                    <button id="whodoneit-check-btn" class="btn-secondary btn-whodoneit">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        Check with WhoDoNeIt
                    </button>
                </div>

                <div class="slop-check hidden" id="slop-check">
                    <h5>Slop Check</h5>
                    <div id="slop-issues"></div>
                </div>
                </div><!-- .output-body -->
            </div>

            <div class="step-nav">
                <button id="btn-back-profile" class="btn-secondary">Back to Profile</button>
            </div>
        </div>

        <!-- Save Profile Prompt Modal -->
        <div id="save-profile-modal" class="modal-overlay hidden">
            <div class="modal modal-small">
                <div class="modal-header">
                    <h3>Save Writing Profile?</h3>
                    <button id="btn-close-save-profile" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Would you like to save your writing profile to this browser? Next time you visit, you'll skip straight to generating content.</p>
                    <p style="font-size: 13px; color: #666; margin-top: 12px;">You can always add more samples or update your profile later.</p>
                    <div class="modal-actions">
                        <button id="btn-save-profile-yes" class="btn-primary">Yes, Save Profile</button>
                        <button id="btn-save-profile-no" class="btn-secondary">No, Just This Session</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Profile View Modal -->
        <div id="quick-profile-modal" class="modal-overlay hidden">
            <div class="modal modal-medium">
                <div class="modal-header">
                    <h3>Your Writing Profile</h3>
                    <button id="btn-close-quick-profile" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="quick-profile-content"></div>
                    <div class="modal-actions">
                        <button id="btn-view-full-profile" class="btn-secondary">View Full Profile</button>
                        <button id="btn-edit-profile" class="btn-secondary">Add More Samples</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Profile Modal -->
        <div id="full-profile-modal" class="modal-overlay hidden">
            <div class="modal modal-large">
                <div class="modal-header">
                    <h3>Full Writing Profile</h3>
                    <button id="btn-close-full-profile" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="full-profile-content" class="profile-results-content"></div>
                    <div class="modal-actions">
                        <button id="btn-copy-profile-modal" class="btn-secondary">Copy Profile JSON</button>
                        <button id="btn-close-full-profile-ok" class="btn-primary">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clear Profile Confirmation Modal -->
        <div id="clear-profile-modal" class="modal-overlay hidden">
            <div class="modal modal-small">
                <div class="modal-header">
                    <h3>Clear Writing Profile?</h3>
                    <button id="btn-close-clear-profile" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>This will delete your current writing profile and start fresh. You'll need to provide new writing samples to create a new profile.</p>
                    <p style="font-size: 13px; color: #666; margin-top: 12px;">Your saved browser profile will also be cleared.</p>
                    <div class="modal-actions">
                        <button id="btn-clear-profile-cancel" class="btn-secondary">Cancel</button>
                        <button id="btn-clear-profile-confirm" class="btn-danger">Clear Profile</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- LinkedIn Share Modal -->
        <div id="linkedin-share-modal" class="modal-overlay hidden">
            <div class="modal modal-small">
                <div class="modal-header">
                    <h3>Share to LinkedIn</h3>
                    <button id="btn-close-linkedin-modal" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p><strong>Content copied to clipboard!</strong></p>
                    <p>LinkedIn doesn't support pre-filled posts, so we've copied your content. Click below to open LinkedIn and paste your post.</p>
                    <div class="modal-actions">
                        <button id="btn-linkedin-open" class="btn-primary">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right: 6px;"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            Open LinkedIn
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- URL Content Preview Modal -->
        <div id="url-content-modal" class="modal-overlay hidden">
            <div class="modal modal-large">
                <div class="modal-header">
                    <h3>Fetched Content</h3>
                    <button id="btn-close-url-content" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p class="url-content-source">From: <a id="url-content-source-link" href="#" target="_blank"></a></p>
                    <div class="url-content-wrapper">
                        <textarea id="url-content-text" rows="15" placeholder="Fetched content will appear here..."></textarea>
                    </div>
                    <p class="url-content-hint">You can edit this content. Changes will be used when generating.</p>
                    <div class="modal-actions">
                        <button id="btn-url-content-save" class="btn-primary">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Professional Style Override Modal -->
        <div id="professional-style-modal" class="modal-overlay hidden">
            <div class="modal modal-medium">
                <div class="modal-header">
                    <h3>Professional Platform Detected</h3>
                    <button id="btn-close-prof-style" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p id="prof-style-platform-text">You're writing for <strong>LinkedIn</strong>, a professional platform.</p>
                    <p>Your writing profile shows a casual style. Would you like to adjust for professional standards?</p>
                    <div class="prof-style-options">
                        <label class="checkbox-option">
                            <input type="checkbox" id="prof-fix-capitalization" checked>
                            <span>Fix capitalization (proper case for sentences, names)</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" id="prof-fix-grammar" checked>
                            <span>Ensure standard grammar and punctuation</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" id="prof-formal-tone">
                            <span>Use more formal vocabulary</span>
                        </label>
                    </div>
                    <div class="modal-actions">
                        <button id="btn-prof-style-skip" class="btn-secondary">Keep My Style</button>
                        <button id="btn-prof-style-apply" class="btn-primary">Apply Adjustments</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Storage Saved Confirmation Modal -->
        <div id="storage-saved-modal" class="modal-overlay hidden">
            <div class="modal modal-small">
                <div class="modal-header">
                    <h3>Profile Saved</h3>
                    <button id="btn-close-storage-saved" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Your writing profile has been saved to this browser's local storage.</p>
                    <div class="storage-info">
                        <h5>What this means:</h5>
                        <ul>
                            <li>Next time you visit, your profile loads automatically</li>
                            <li>You'll skip straight to generating content</li>
                            <li>Your data stays on this device only</li>
                            <li>Clearing browser data will remove the profile</li>
                        </ul>
                    </div>
                    <p style="font-size: 13px; color: #666; margin-top: 12px;">You can update or clear your profile from the input screen.</p>
                    <div class="modal-actions">
                        <button id="btn-close-storage-ok" class="btn-primary">Got it</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Style Sketch Studio Modal -->
        <div id="style-studio-modal" class="modal-overlay hidden">
            <div class="modal modal-medium">
                <div class="modal-header">
                    <h3>Style Sketch Studio</h3>
                    <button id="btn-close-style-studio" class="btn-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Select styles to shape your content. Each style adjusts the tone, pacing, and approach of the generated text while preserving your core voice.</p>
                    
                    <div class="style-studio-content">
                        <div id="style-studio-list"></div>
                        
                        <!-- Style Preview Section -->
                        <div id="style-preview-section" class="style-preview-section hidden">
                            <h4>Predicted Style Impact</h4>
                            <div id="style-preview-metrics" class="style-preview-metrics"></div>
                        </div>
                        
                        <div class="style-studio-feedback">
                            <label for="style-feedback">Additional style guidance (optional):</label>
                            <textarea id="style-feedback" placeholder="E.g., 'Make it sound more confident' or 'Add a bit of humor but keep it professional'"></textarea>
                        </div>
                    </div>
                    
                    <div class="style-studio-footer">
                        <button id="btn-style-studio-cancel" class="btn-secondary">Cancel</button>
                        <button id="btn-style-studio-apply" class="btn-primary">Apply Styles</button>
                        <button id="btn-style-studio-regenerate" class="btn-primary hidden">Regenerate with Styles</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error -->
        <div id="error-section" class="error-message hidden"></div>
    </div>

    <!-- Puter Fallback Modal -->
    <div id="puter-fallback-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3>Puter isn't available — run locally with Ollama</h3>
                <button id="btn-close-fallback" class="btn-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="puter-fallback-reason"></p>
                <p>You can run GPT-OSS locally for free using <strong>Ollama</strong>. No API key, no usage limits, no data leaves your computer.</p>

                <p class="alert-box"><strong>Browser requirement:</strong> When using Ollama from GitHub Pages (or any HTTPS URL), <strong>Google Chrome is required</strong>.</p>

                <div class="os-tabs">
                    <button class="os-tab-btn active" data-os="mac">macOS</button>
                    <button class="os-tab-btn" data-os="win">Windows</button>
                    <button class="os-tab-btn" data-os="linux">Linux</button>
                </div>

                <!-- macOS -->
                <div class="os-panel active" data-os="mac">
                    <p><strong>1.</strong> Install Ollama:</p>
                    <pre class="terminal-block">curl -fsSL https://ollama.com/install.sh | sh</pre>
                    <p><strong>2.</strong> Pull GPT-OSS and start with browser access:</p>
                    <pre class="terminal-block">ollama pull gpt-oss:20b
pkill ollama
OLLAMA_ORIGINS=* ollama serve</pre>
                </div>

                <!-- Windows -->
                <div class="os-panel" data-os="win">
                    <p><strong>1.</strong> Download from <strong>ollama.com/download</strong> and install.</p>
                    <p><strong>2.</strong> In PowerShell:</p>
                    <pre class="terminal-block">ollama pull gpt-oss:20b
Stop-Process -Name ollama -Force
$env:OLLAMA_ORIGINS="*"; ollama serve</pre>
                </div>

                <!-- Linux -->
                <div class="os-panel" data-os="linux">
                    <p><strong>1.</strong> Install and configure:</p>
                    <pre class="terminal-block">curl -fsSL https://ollama.com/install.sh | sh
ollama pull gpt-oss:20b
sudo systemctl edit ollama
# Add: Environment="OLLAMA_ORIGINS=*"
sudo systemctl restart ollama</pre>
                </div>

                <p><strong>3.</strong> Click below to switch Write Like Me to Ollama:</p>
                <button id="btn-switch-ollama" class="btn-primary" style="margin-top: 8px;">Switch to Ollama now</button>
            </div>
        </div>
    </div>

    <footer class="license-section">
        <div class="footer-links">
            <div class="license-badge">
                MIT License
                <div class="license-tooltip">
                    MIT License<br><br>
                    Copyright (c) 2026 Austin Harshberger<br><br>
                    Permission is hereby granted, free of charge, to any person obtaining a copy
                    of this software and associated documentation files (the "Software"), to deal
                    in the Software without restriction, including without limitation the rights
                    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                    copies of the Software, and to permit persons to whom the Software is
                    furnished to do so, subject to the following conditions:<br><br>
                    The above copyright notice and this permission notice shall be included in all
                    copies or substantial portions of the Software.
                </div>
            </div>
            <a href="https://attest.ink/verify/?data=eyJ2ZXJzaW9uIjoiMi4wIiwiaWQiOiIyMDI2LTAyLTIzLXdyaXRlbGlrZW1lIiwiY29udGVudF9uYW1lIjoiV3JpdGUgTGlrZSBNZSIsInRpbWVzdGFtcCI6IjIwMjYtMDItMjNUMDA6MDA6MDAuMDAwWiIsInBsYXRmb3JtIjoiYXR0ZXN0LmluayIsIm1vZGVsIjoiY2xhdWRlLW9wdXMtNC02Iiwicm9sZSI6ImdlbmVyYXRlZCIsImRvY3VtZW50X3R5cGUiOiJjb2RlIiwiYXV0aG9yIjoiOTcgMTE1IDEwNCJ9" class="attest-badge" target="_blank" rel="noopener noreferrer">
                built with ai
            </a>
        </div>
        <div class="author-info">
            <a href="https://github.com/sponsors/97115104" target="_blank" rel="noopener noreferrer">Created by 97 115 104 <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#888" stroke-width="2" style="display:inline;margin-left:4px;vertical-align:-2px;"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></a>
            <div style="margin-top: 12px; font-size: 13px; line-height: 1.6;">
                <a href="https://github.com/97115104/writelikeme" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">View the source code on GitHub</a>
                <br />
                <a href="https://97115104.com/projects/" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">Other projects</a>
            </div>
        </div>
    </footer>

    <script src="./js/apiClient.js"></script>
    <script src="./js/writingAnalyzer.js"></script>
    <script src="./js/uiRenderer.js"></script>
    <script src="./js/app.js"></script>
</body>
</html>
